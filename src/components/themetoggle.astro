---
---
<button id="theme-toggle" style="padding:0.5rem 1rem; border-radius:0.5rem; border:none; cursor:pointer;">
  ðŸŒ™
</button>

<script type="module">
  const button = document.getElementById('theme-toggle');

  // Appliquer un thÃ¨me donnÃ© et mettre Ã  jour l'icÃ´ne
  function applyTheme(theme) {
    document.documentElement.setAttribute('data-theme', theme);
    localStorage.setItem('theme', theme);
    button.textContent = theme === 'dark' ? 'ðŸŒ™' : 'â˜€ï¸';
  }

  // Initialisation : rÃ©cupÃ©rer le thÃ¨me stockÃ© ou utiliser dark par dÃ©faut
  const storedTheme = localStorage.getItem('theme') || 'dark';
  applyTheme(storedTheme);

  // Clic sur le bouton pour basculer le thÃ¨me
  button.addEventListener('click', () => {
    const currentTheme = document.documentElement.getAttribute('data-theme');
    applyTheme(currentTheme === 'dark' ? 'light' : 'dark');
  });

  // Pour ClientRouter : rÃ©appliquer le thÃ¨me aprÃ¨s chaque navigation client
  document.addEventListener('astro:after-swap', () => {
    const storedTheme = localStorage.getItem('theme') || 'dark';
    applyTheme(storedTheme);
  });
</script>